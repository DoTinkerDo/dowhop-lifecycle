<!doctype html>
<!--
  Copyright 2015 Google Inc. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  https://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="DoWhop WebChat" content="Arrange details with other DoWhop users">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DoWhop Chat</title>

  <!-- Disable tap highlight on IE -->
  <meta name="msapplication-tap-highlight" content="no">

  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Friendly Chat">
  <!-- <meta name="theme-color" content="#303F9F"> -->

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Friendly Chat">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303F9F">

  <!-- Tile icon for Win8 -->
  <meta name="msapplication-TileColor" content="#3372DF">
  <meta name="msapplication-navbutton-color" content="#303F9F">

  <!-- Adding jQUery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <!-- Material Design Lite -->
  <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

  <!-- App Styling -->
<!--   <style>
    *, *:before, *:after {box-sizing: border-box;margin: 0;padding: 0;}html {height: 100%;background: #fff;}body {font-family: 'Avenir Light', Avenir Light, Avenir, sans-serif;min-width: 320px;}input, button {border: none;outline: none;background: none;font-family: 'Avenir Light', Avenir Light, Avenir, sans-serif;color: #606060;}header {text-align: center;padding-top: 10px;}header h1 {font-size: 24px;}.wrap {width: 100%;margin: 25px auto;padding: 0 30px;min-height: 60vh;}@media (min-width: 641px) {.wrap {display: flex;max-width: 900px;}}.form-wrap {width: 100%;padding: 30px 60px;background: #fff;text-align: center;}@media (min-width: 641px) {.form-wrap {flex: 1 0 50%;box-shadow: 0 8px 6px -6px #808080;}}.form-wrap h2 {text-align: center;font-size: 26px;color: #606060;}.form-wrap .form-line {margin: 40px 0 0 0;width: 100%;display: block;text-align: center;position: relative;}.form-wrap .form-line > span {color: #606060;text-transform: uppercase;display: inline-block;width: 100%;font-size: 12px;}.form-wrap .form-line input[type="text"], .form-wrap .form-line input[type="email"] {display: inline-block;width: 100%;margin-top: 6px;padding-bottom: 5px;font-size: 16px;border-bottom: 1px solid rgba(0,0,0,0.4);text-align: center;position: relative;}.form-error {color: #ec1928;font-size: 14px;padding-top: 15px;}.form-error.error--ok {color: #ec1928;}.bar {position: absolute;display: block;width: 100%;bottom: 0;left: 0;z-index: 10;}.bar:before, .bar:after {content: '';height: 2px;width: 0;bottom: 0px;position: absolute;background: #ec1928;transition: 0.2s ease all;}.bar:before {left: 50%;}.bar:after {right: 50%;}input:focus ~ .bar:before, input:focus ~ .bar:after {width: 50%;}.submit {display: inline-block;margin: 40px auto 0 auto;padding: 10px 50px;background: #ec1928;color: #fff;font-weight: 700;border-radius: 0px;font-size: 16px;cursor: pointer;transition: 0.2s ease all;}.submit2 {display: inline-block;margin: 40px auto 0 auto;padding: auto auto;background: #ec1928;color: #fff;font-weight: 700;border-radius: 0px;font-size: 16px;cursor: pointer;transition: 0.2s ease all;}.submit:hover, .submit2:hover {background: #fff;color: #ec1928;}.user-list {width: 100%;background: #fff;box-shadow: 0 8px 6px -6px #808080;padding: 30px 40px;border-top: 3px solid #cfd9df;}@media (min-width: 641px) {.user-list {flex: 1 0 50%;border-left: 3px solid #ededed;border-top: none;}}.user-list > h2 {text-align: center;font-size: 26px;padding-bottom: 30px;color: #606060;}.user-list__item {padding: 10px;border: 1px solid #ededed;border-radius: 3px;border-left: 3px solid #ec1928;margin-bottom: 10px;}.user-list__item h4, .user-list__item p {font-size: 14px;padding-bottom: 10px;color: #c0c0c0;font-size: 14px;}.user-list__item h4 span, .user-list__item p span {color: #606060;} #top-bar-dowhop{ display:none;} #hover-flag{ color: grey; background-color: red; transition: 0.8s ease all;} #hover-flag:hover { background-color: red; transition: 0.8s ease all;} #hover-flag:hover + #top-bar-dowhop{ display:block;} #top-bar-dowhop:hover{ display:block;};
  </style> -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.0.0/firebaseui.css" /> <!-- Firebase UI CSS for Web Auth -->
  <link rel="stylesheet" href="styles/main.428896f6.css">
  <link rel="stylesheet" href="styles/main.css"> <!--Catch-all stylings-->
  <link rel="stylesheet" href="styles/login-tabs-styles.css">
  <link rel="stylesheet" href="styles/dowhop-selector-style.css">
  <script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>  <!-- Firebase library -->
  <script src="scripts/firebase.js"></script> <!-- Initialize Firebase app -->
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script> <!-- Lodash ._ -->
  <script src="https://cdn.firebase.com/libs/firebaseui/2.0.0/firebaseui.js"></script> <!-- Firebase UI JS for Web Auth -->

</head>

<body>

  <!-- Login splash screen -->
  <section id="login-container">
    <div class="login-page-title">
      <h2>Log In</h2>
      <h4> Confirm your information to view your DoWhops</h4>
    </div>
    <div class=login-container>
      <div id="firebaseui-auth-container"></div>
    </div>
  </section>

  <!-- Application Container -->
  <section class="hide-component" id="application-container">
    <div class="flex-wrapper">
      <div class="tabs-container">
        <ul class="tabs">
          <li><a class="tab" href="#newdowhop" onclick="getSesh()"><span>+</span></a></li>
          <li><a class="tab" href="#create" onclick="getSesh()"><span>✎</span></a></li>
          <li><a class="tab" href="#coordinate" onclick="getSesh()">Coordinate</a></li>
          <li><a class="tab" href="#review" onclick="getSesh()"><span>★</span></a></li>
          <li><a class="btn-logout" href="#" onclick="firebase.auth().signOut()"><span>Log Out</span></a></li>
        </ul>
      </div>
    </div>

    <div class="dowhop-image-container">
      <div>
        <div id="dowhop-selector-container"></div>
      </div>
    </div>
    <div id='pending-div-container' class='pending-notification'>
      <div id='pending-div'></div>
      <form hidden id='approve-pending-form' class='approval-form'>
        <input id="radioApprove" type='radio' name='approval' value='approve'>Approve
        <input id="radioDeny" type='radio' name='approval' value='deny'>Deny
        <button id='submit-approval-button' type='submit' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect'>Send
        </button>
      </form>
      <form hidden id='rescind-pending-form' class='approval-form'>
        <button id='submit-rescind-button' type='submit' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect'>Rescind
        </button>
      </form>
    </div>

    <div id="newdowhop" class="panel">
      <div class="mdl-layout mdl-js-layout">
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--7-col" id="dowhop-placard"></div>
          <div class="mdl-cell mdl-cell--5-col">
            <form action="#">
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="title-description" placeholder="Do this with me">
                <label class="mdl-textfield__label" for="title-description">DoWhop Title</label>
              </div>
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="who-description" placeholder="This many people with this skill level">
                <label class="mdl-textfield__label" for="who-description">Who Should Join?</label>
              </div>
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="what-description" placeholder="I bring this, you bring that, we will make this">
                <label class="mdl-textfield__label" for="what-description">What will you provide?</label>
              </div>
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="when-description" placeholder="It will take this many hours, on these days">
                <label class="mdl-textfield__label" for="when-description">When will you do?</label>
              </div>
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="where-description" placeholder="Meet at this location">
                <label class="mdl-textfield__label" for="where-description">Where will you meet?</label>
              </div>
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="how-much-description" placeholder="This much per person">
                <label class="mdl-textfield__label" for="how-description">How much will it cost?</label>
              </div>
              <input id="dowhop-image-capture" type="file" accept="image/*,capture=camera" onchange="addDoWhopImage(this.files, this)">
              <button class="mdl-button mdl-js-button mdl-button--raised" id="create-new-dowhop">
                Create New DoWhop
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div id="create" class="panel">
      <div class="mdl-layout mdl-js-layout">
        <!--show what the user put in by displaying user list wrap-->
        <div class="mdl-cell mdl-cell--7-col user-list">
          <h2 class="mdl-title">My DoWhops in Planning</h2>
          <div id="user-list-wrap"></div>
        </div> <!-- Close Form wrap -->
        <div class="mdl-cell mdl-cell--5-col form-wrap">

          <h2 class="mdl-title">Whop will you do?</h2>
          <br>
          <span style=color:#ec1928;>Type "same" to keep that section as is.</span>

          <form action="">

            <label class="form-line">
              <span>DoWhop Title <button type="button" name="button"><i class="fa fa-plus-circle plus-button" aria-hidden="true"></i></button></span>
              <input type="text" id="titleDescription" placeholder="Do this with Me"/>
              <span class="bar"></span>
            </label>

            <div class="options title-options">
              <div class="underbar icons-1">
                <div id="image" class="img_icon">
                  <input type="file" id="titleFile" class="file" onchange="handleFile(this.files, this)"/>
                  <img src="images/image-add-button.png" alt="" width="24" height="24">
                  <div hidden id="titleImage"></div>
                </div>
              </div>
              <div class="underbar_options" data-openoption="">

              </div>
            </div>

            <span class="bar"></span>
            <label class="form-line">
              <span>Who should join? <button type="button" name="button"><i class="fa fa-plus-circle plus-button" aria-hidden="true"></i></button></span>
              <input type="text" id="whoDescription" placeholder="This many people with this skill level"/>
              <span class="bar"></span>
            </label>
            <div class="options who-options">
              <div class="underbar icons-1">
                <div id="image" class="img_icon">
                  <input type="file" id="whoFile" class="file" onchange="handleFile(this.files, this)"/>
                  <img src="images/image-add-button.png" alt="" width="24" height="24">
                  <div hidden id="whoImage"></div>
                </div>
              </div>
              <div class="underbar_options" data-openoption="">

              </div>
            </div>

            <span class="bar"></span>
            <label class="form-line">
            <span>What will you provide?<button type="button" name="button"><i class="fa fa-plus-circle plus-button" aria-hidden="true"></i></button></span>
              <input type="text" id="whatDescription" placeholder="I'll bring this, you bring that, we'll make this"/>
              <span class="bar"></span>
            </label>
            <div class="options what-options">
              <div class="underbar icons-1">
                <div id="image" class="img_icon">
                  <input type="file" id="whatFile" class="file" onchange="handleFile(this.files, this)"/>
                  <img src="images/image-add-button.png" alt="" width="24" height="24">
                  <div hidden id="whatImage"></div>
                </div>
              </div>
              <div class="underbar_options" data-openoption="">

              </div>
            </div>

            <span class="bar"></span>
            <label class="form-line">
              <span>Where will you meet?<button type="button" name="button"><i class="fa fa-plus-circle plus-button" aria-hidden="true"></i></button></span>
              <input type="text" id="whereDescription" placeholder="Meet at this address and go here"/>
              <span class="bar"></span>
            </label>
            <div class="options where-options">
              <div class="underbar icons-2">
                <div id="wheremap" class="img_icon">
                  <img src="images/map.png" alt="" width="24" height="24">
                </div>
                <div id="image" class="img_icon">
                  <input type="file" id="whereFile" class="file" onchange="handleFile(this.files, this)"/>
                  <img src="images/image-add-button.png" alt="" width="24" height="24">
                  <div hidden id="whereImage"></div>
                </div>
              </div>
              <div class="underbar_options" data-openoption="">
                <div hidden id="wheremap_options">
                  <input id="whereAddress" class="controls" type="text" placeholder="Set a place...">
                </div>
                <div hidden id="image_options">

                </div>
              </div>
            </div>

            <span class="bar"></span>
            <label class="form-line">
              <span>When will you do?<button type="button" name="button"><i class="fa fa-plus-circle plus-button" aria-hidden="true"></i></button></span>
              <input type="text" id="whenDescription" placeholder="It will take this many hours on these days"/>
              <span class="bar"></span>
            </label>
            <div class="options when-options">
              <div class="underbar icons-3">
                <div id="calendar" class="img_icon">
                  <input type="date" id='whenDate'>
                  <img src="images/calendar.png" alt="" width="24" height="24">
                </div>
                <div id="clock" class="img_icon">
                  <img src="images/clock-circular-outline.png" alt="" width="24" height="24">
                </div>
                <div id="calendar" class="img_icon">
                  <input type="file" id="whenFile" class="file" onchange="handleFile(this.files, this)"/>
                  <img src="images/image-add-button.png" alt="" width="24" height="24">
                  <div hidden id="whenImage">

                  </div>
                </div>
              </div>

              <div class="underbar_options" data-openoption="">
                <div hidden id="calendar_options">
                </div>
                <div hidden id="clock_options">
                  <span>Time:
                    <input type="time" id='whenTime' size="50">
                  </span>
                </div>
                <div hidden id="image_options">

                </div>
              </div>
            </div>

            <span class="bar"></span>
            <label class="form-line">
              <span>How much will it cost?<button type="button" name="button"><i class="fa fa-plus-circle plus-button" aria-hidden="true"></i></button></span>
              <input type="text" id="howmuchDescription" placeholder="$THIS much money per person"/>
              <span class="bar"></span>
            </label>
            <div class="options howmuch-options">
              <div class="underbar icons-2">
                <div id="clock" class="img_icon">
                  <img src="images/clock-circular-outline.png" alt="" width="24" height="24">
                </div>
                <div id="image" class="img_icon">
                  <input type="file" id="howmuchFile" class="file" onchange="handleFile(this.files, this)"/>
                  <img src="images/image-add-button.png" alt="" width="24" height="24">
                  <div hidden id="howmuchImage">

                  </div>
                </div>
              </div>
              <div class="underbar_options" data-openoption="">
                <div hidden id="clock_options">
                  <span>Cost (Icon is placeholder):
                    <input type="number" id='howmuchCost' size="50">
                  </span>
                </div>
                <div hidden id="image_options">
                 </div>
              </div>
            </div>
            <span class="bar"></span>

            <label class="form-line">
              <span>Contact Email</span>
              <input type="email" id="email" placeholder="my@emailaddress.com"/>
              <span class="bar"></span>
            </label>

            <div id="admin-input-form">
              <label class="form-line">
              <span>ADMIN: What's the Doer's Email?</span>
              <input type="email" id="doerEmail" placeholder="doer email here"/>
              </label>
              <label class="form-line">
              <span>ADMIN: What's the Host's Email (if host is not yourself)?</span>
              <input type="email" id="hostEmail" placeholder="doer email here"/>
              </label>
            </div>
            <button type="button" class="submit" id="submit">Submit</button>

            <div id="error" class="form-error"></div>
          </form>
        </div>
      </div> <!-- Close Wrap -->
    </div> <!-- Close Panel tab -->


    <!-- Coordinate app -->
    <div id="coordinate" class="panel">

      <main class="">
        <h6>Please click on header above to load messages! </h6>
      <!-- Chat threads container -->
      <!-- <div id='container-box'> -->
        <!-- <div id="chat-list-container" class="form-wrap"> -->
          <!-- <h3>My Event Chats</h3> -->
          <!-- <h6>Click to load messages.</h6> -->
          <!-- <ul id="chat-list"> -->
            <!--New chat-thread (button) items shall go here-->
          <!-- </ul> -->
        <!-- </div> -->

        <!-- <div id="show-chat-data-form" class=""> -->
          <div id="show-chat-data">
          <!-- </div> -->
          <!-- These are the hidden pending notifications -->
          <!-- <div id='pending-div-container' class='pending-notification'>
            <p id='pending-div'></p>
            <form hidden id='approve-pending-form' class='approval-form'>
              <input id="radioApprove" type='radio' name='approval' value='approve'>Approve
              <input id="radioDeny" type='radio' name='approval' value='deny'>Deny
              <button id='submit-approval-button' type='submit' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect'>Send
              </button>
            </form>
            <form hidden id='rescind-pending-form' class='approval-form'>
              <button id='submit-rescind-button' type='submit' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect'>Rescind
              </button>
            </form>
          </div> -->
        </div>

        <div id="messages-card-container"  class="form-wrap col-sm-12 col-xs-12">
          <!-- Messages container -->
          <div id="messages-card">
              <div id="messages">
                <span id="message-filler"></span>
              </div>
              <form id="message-form" action="#">
                <div id="message-form-div" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                  <label class="form-line" for="message">Message
                    <input type="text" id="message">
                    <span class="bar">
                  </label>
                  <!-- Adding options div here -->
                  <div class="options-coordinate">
                    <div class="underbar">
                      <div id="optione-calendar" class="img_icon">
                        <img onclick="revealInput('date')" src='images/calendar.png' alt="" width="24" height="24">
                      </div>
                      <div id="clock" class="img_icon">
                        <img onclick="revealInput('time')" src="images/clock-circular-outline.png" alt="" width="24" height="24">
                      </div>
                      <div id="map-div" class="img_icon">
                        <img onclick="revealInput('where')" src="https://static.wixstatic.com/media/de271e_5641b0592f5d4404aa31a1386df01958~mv2.png/v1/fill/w_512,h_512,al_c/de271e_5641b0592f5d4404aa31a1386df01958~mv2.png" alt="" width="24" height="24">
                      </div>
                      <div id="image" class="img_icon">
                        <img onclick="revealInput('image')" src="images/image-add-button.png" alt="" width="24" height="24">
                      </div>
                      <div id="send-message-button">
                        <button id="submit-message-button" disabled type="submit" class=" options-div-submit">
                          Send
                        </button>
                      </div>
                    </div>
                  </div>

                <!-- End of Message Form Div -->
                </div>

                <div id="hidden-inputs">
                  <input hidden type="date" id="whenDatePending">
                  <input hidden type="time" id='whenTimePending' size="50">
                  <input hidden id="whereAddressPending" class="controls" type="text" placeholder="Set a place...">
                  <div hidden id="map"></div>
                </div>
              </form>
              <form id="image-form" action="#">
                <input hidden id="mediaCapture" type="file" accept="image/*,capture=camera">
                <button hidden  id="submitImage" title="Add an image" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--red-200 mdl-color-text--white">
                  <i class="material-icons">perm_media</i>
                </button>
              </form>
          </div>
        </div>

        <div id="must-signin-snackbar" class="mdl-js-snackbar mdl-snackbar">
          <div class="mdl-snackbar__text"></div>
          <button class="mdl-snackbar__action" type="button"></button>
        </div>
      </div>
      </main>
    </div>

    <!-- review app  -->
    <div id="review" class="panel"></div>

  </section> <!-- End Application Container -->

  <!-- <script src="scripts/jquery.js"></script> --> <!-- Commented out to stop error in console  -->
  <script src="scripts/login.js"></script>
  <script src="scripts/tabs.js"></script>
  <script src="scripts/main.js"></script>
  <script src="scripts/main.224fb9ad.js"></script>
  <script src="scripts/dowhop-description-form.js"></script>
  <script>
    var btnLogOut = document.querySelector('.btn-logout');
    function changeLoginText() {
      var btnSpans = document.querySelectorAll('.firebaseui-idp-text-long');
      if (btnSpans.length > 0) {
        btnSpans[0].innerHTML = 'Login with Google';
        btnSpans[1].innerHTML = 'Login with Facebook';
        btnSpans[2].innerHTML = 'Login with Email';
      } else {
        console.log('NO LOGIN BUTTONS SELECTED');
      }
    }
    btnLogOut.addEventListener('click', changeLoginText);
    window.addEventListener('load', changeLoginText);
  </script>
  </body>
</html>

<!--Adding location, date, time auto-completes--->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-coo6M25h9GjP8AYxhzIQSbNVj-Ope3s&libraries=places&callback=initAutocomplete" async defer></script>
<!-- <script>
  function initialize() {
  var input = document.getElementById('searchTextField');
  var autocomplete = new google.maps.places.Autocomplete(input);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> --->
<script>
function initAutocomplete() {

// OM: We initially want to get current location, like so:
// var loc;
// loc = navigator.geolocation.getCurrentPosition(function(position){ return x = position.coords })
// let lat = loc.latitude;
// let long = loc.longitude;

// To-Do: Change the starting location of the map to dynamically load:

  var map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 32.742705, lng: -117.145857}, // <-- Preset to San Diego Zoo
    zoom: 13,
    mapTypeId: 'roadmap',
    mapTypeControl: true,
    mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
        position: google.maps.ControlPosition.BOTTOM_CENTER
    }
  });

  // Create the search box and link it to the UI element.
  var input = document.getElementById('whereAddressPending');
  var searchBox = new google.maps.places.SearchBox(input);
  map.controls[google.maps.ControlPosition.TOP_CENTER].push(input);

  // Bias the SearchBox results towards current map's viewport.
  map.addListener('bounds_changed', function() {
    searchBox.setBounds(map.getBounds());
  });

  var markers = [];
  // Listen for the event fired when the user selects a prediction and retrieve
  // more details for that place.
  searchBox.addListener('places_changed', function() {
    var places = searchBox.getPlaces();

    if (places.length == 0) {
      return;
    }

    // Clear out the old markers.
    markers.forEach(function(marker) {
      marker.setMap(null);
    });
    markers = [];

    // For each place, get the icon, name and location.
    var bounds = new google.maps.LatLngBounds();
    places.forEach(function(place) {
      if (!place.geometry) {
        console.log("Returned place contains no geometry");
        return;
      }
      var icon = {
        url: place.icon,
        size: new google.maps.Size(71, 71),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(17, 34),
        scaledSize: new google.maps.Size(25, 25)
      };

      // Create a marker for each place.
      markers.push(new google.maps.Marker({
        map: map,
        icon: icon,
        title: place.name,
        position: place.geometry.location
      }));

      if (place.geometry.viewport) {
        // Only geocodes have viewport.
        bounds.union(place.geometry.viewport);
      } else {
        bounds.extend(place.geometry.location);
      }
    });
    map.fitBounds(bounds);
  });
}
</script>
<script>

var date, time, where, image;

function revealInput(x) {

    switch(x) {

      case 'date':
        document.getElementById("whenDatePending").removeAttribute("hidden");
        document.getElementById("whenTimePending").setAttribute("hidden","true");
        document.getElementById("whereAddressPending").setAttribute("hidden","true");
        document.getElementById("map").setAttribute("hidden","true");
        document.getElementById("mediaCapture").setAttribute("hidden","true");
        document.getElementById("submitImage").setAttribute("hidden","true");
        break;

      case 'time':
        document.getElementById("whenTimePending").removeAttribute("hidden");
        document.getElementById("whenDatePending").setAttribute("hidden","true");
        document.getElementById("whereAddressPending").setAttribute("hidden","true");
        document.getElementById("map").setAttribute("hidden","true");
        document.getElementById("mediaCapture").setAttribute("hidden","true");
        document.getElementById("submitImage").setAttribute("hidden","true");
        break;

      case 'where':
        document.getElementById("whereAddressPending").removeAttribute("hidden");
        document.getElementById("map").removeAttribute("hidden");
        document.getElementById("whenDatePending").setAttribute("hidden","true");
        document.getElementById("whenTimePending").setAttribute("hidden","true");
        document.getElementById("mediaCapture").setAttribute("hidden","true");
        document.getElementById("submitImage").setAttribute("hidden","true");
        break;

      case 'image':
        document.getElementById("mediaCapture").removeAttribute("hidden");
        document.getElementById("submitImage").removeAttribute("hidden");
        document.getElementById("whenDatePending").setAttribute("hidden","true");
        document.getElementById("whenTimePending").setAttribute("hidden","true");
        document.getElementById("whereAddressPending").setAttribute("hidden","true");
        document.getElementById("map").setAttribute("hidden","true");
        break;

      default:
        document.getElementById("whenDatePending").setAttribute("hidden", "true");
        document.getElementById("whenTimePending").setAttribute("hidden","true");
        document.getElementById("whereAddressPending").setAttribute("hidden","true");
        document.getElementById("map").setAttribute("hidden","true");
        document.getElementById("mediaCapture").setAttribute("hidden","true");
        document.getElementById("submitImage").setAttribute("hidden","true");
        break;
    };
}
</script>
<script src="scripts/create.js"></script>
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
</body>
</html>
